<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>03_graph_string_converter - sds-3.x/ScaDaMaLe</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../scroll-mdbook-outputs.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../contents/student-project-07_group-MathAtKTH/01_Coding_Motifs.html">01_Coding_Motifs</a></li><li class="chapter-item expanded affix "><a href="../../contents/student-project-07_group-MathAtKTH/02_Data_Processing.html">02_Data_Processing</a></li><li class="chapter-item expanded affix "><a href="../../contents/student-project-07_group-MathAtKTH/03_graph_string_converter.html" class="active">03_graph_string_converter</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">sds-3.x/ScaDaMaLe</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="cell markdown">
<p>ScaDaMaLe Course <a href="https://lamastex.github.io/scalable-data-science/sds/3/x/">site</a> and <a href="https://lamastex.github.io/ScaDaMaLe/index.html">book</a></p>
</div>
<div class="cell markdown">
<h1 id="intro"><a class="header" href="#intro">Intro</a></h1>
<p>In this notebook we create a code-writing program. Coding a specific motif generally makes for very long strings, the length grows as \(n^2\). Thus coding them directly is very inefficient. We solved this problem via a simple program. Here we can simply feed the adjacancy matrix of the motif we want to find, and it gives us the scala code.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">import numpy as np
</code></pre>
</div>
<div class="cell markdown">
<p>In this funtion we input the adjacancy matrix of the motif we want to find. Then it produces the text of a scala command. Than command can then be copy-pasted into another notebook.</p>
<p>Here we simply go through the adjacancy matrix and fix the string thereafter. In this function the motif we want to find is induced by the graph. Thus each edge is either wanted or forbidden.</p>
<p>loops - Do we care about loops or not.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">def matrix_to_string(input_matrix, input_function_name, loops = True):
  ret_string = &quot;def &quot; + input_function_name + &quot;(input_graph: GraphFrame) = {\n\tval string_&quot; +input_function_name+ &quot; = \&quot;&quot;
  filter_string = &quot;&quot;
  pos_edges = &quot;&quot;
  neg_edges = &quot;&quot;
  alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
  
  for i in range(len(input_matrix)):
    for j in range(len(input_matrix[i])):
      if i == j:
        if loops and input_matrix[i][j] != 0:
          pos_edges += &quot;(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
        elif loops:
          neg_edges += &quot;!(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
      elif input_matrix[i][j] != 0:
        pos_edges += &quot;(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
      else:
        neg_edges += &quot;!(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
      if i &gt; j:
        filter_string += &quot;.filter(\&quot;&quot; + alphabet[j] + &quot;.id != &quot; + alphabet[i] + &quot;.id\&quot;)&quot;
  ret_string += pos_edges + neg_edges
  ret_string = ret_string[0:-2]
  ret_string += &quot;\&quot;\n\tinput_graph.find(g_1)&quot;
  ret_string += filter_string
  ret_string += &quot;.count\n}\n&quot;
  return ret_string
  
  
  
</code></pre>
</div>
<div class="cell markdown">
<p>In this funtion we input the signed adjacancy matrix of the motif we want to find. Then it produces the text of a scala command. Than command can then be copy-pasted into another notebook.</p>
<p>Here we simply go through the adjacancy matrix and fix the string thereafter. In this function each edge can either be demanded, forbidden, or allowed. The three states are represented by 1, -1, and all other values.</p>
<p>loops - Do we care about loops or not.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">def matrix_to_string_signed(input_matrix, input_function_name):
  ret_string = &quot;def &quot; + input_function_name + &quot;(input_graph: GraphFrame) = {\n\tval string_&quot; +input_function_name+ &quot; = \&quot;&quot;
  filter_string = &quot;&quot;
  pos_edges = &quot;&quot;
  neg_edges = &quot;&quot;
  alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
  
  for i in range(len(input_matrix)):
    for j in range(len(input_matrix[i])):
      if input_matrix[i][j] == 1:
        pos_edges += &quot;(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
      elif input_matrix[i][j] == -1:
        neg_edges += &quot;!(&quot; + alphabet[i] + &quot;)-[]-&gt;(&quot; + alphabet[j] + &quot;); &quot;
      if i &gt; j:
        filter_string += &quot;.filter(\&quot;&quot; + alphabet[j] + &quot;.id != &quot; + alphabet[i] + &quot;.id\&quot;)&quot;
  ret_string += pos_edges + neg_edges
  ret_string = ret_string[0:-2]
  ret_string += &quot;\&quot;\n\tinput_graph.find(g_1)&quot;
  ret_string += filter_string
  ret_string += &quot;.count\n}\n&quot;
  return ret_string
</code></pre>
</div>
<div class="cell markdown">
<h1 id="examples"><a class="header" href="#examples">Examples</a></h1>
<p>Here is a quick example where we have coded for a &quot;claw&quot;. Another name for the claw is a star of size 3, meaning it has 4 vertices.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">print(matrix_to_string([[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,0]], &quot;count_claw&quot;, loops = False))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>def count_claw(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(d); (b)-[]-&gt;(d); (c)-[]-&gt;(d); !(a)-[]-&gt;(b); !(a)-[]-&gt;(c); !(b)-[]-&gt;(a); !(b)-[]-&gt;(c); !(c)-[]-&gt;(a); !(c)-[]-&gt;(b); !(d)-[]-&gt;(a); !(d)-[]-&gt;(b); !(d)-[]-&gt;(c)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).filter(&quot;a.id != d.id&quot;).filter(&quot;b.id != d.id&quot;).filter(&quot;c.id != d.id&quot;).count
}
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Here we cave coded for a v-structure.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">print(matrix_to_string([[0,0,1],[0,0,1],[0,0,0]], &quot;count_v_struc&quot;, loops = False))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>def count_v_struc(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(c); (b)-[]-&gt;(c); !(a)-[]-&gt;(b); !(b)-[]-&gt;(a); !(c)-[]-&gt;(a); !(c)-[]-&gt;(b)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).count
}
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Counting how many loops</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">print(matrix_to_string([[1]], &quot;count_loop&quot;))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>def count_loop(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(a)&quot;
	input_graph.find(g_1).count
}
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>A very important thing we want to look at is complete graphs.</p>
<p>As these can grow big, we write a function to generate them.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">def adj_matrix_complete_graph(size):
  adj_matrix = np.zeros((size,size))
  for i in range(len(adj_matrix)):
    for j in range(i+1, len(adj_matrix[i])):
      adj_matrix[i][j] = 1
  return adj_matrix
  
</code></pre>
</div>
<div class="cell markdown">
<p>Now we can generate the code of interest.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-python">for i in range(3,7+1):
  print(matrix_to_string_signed(adj_matrix_complete_graph(i), &quot;count_K&quot;+str(i)))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>def count_K3(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(b); (a)-[]-&gt;(c); (b)-[]-&gt;(c)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).count
}

def count_K4(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(b); (a)-[]-&gt;(c); (a)-[]-&gt;(d); (b)-[]-&gt;(c); (b)-[]-&gt;(d); (c)-[]-&gt;(d)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).filter(&quot;a.id != d.id&quot;).filter(&quot;b.id != d.id&quot;).filter(&quot;c.id != d.id&quot;).count
}

def count_K5(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(b); (a)-[]-&gt;(c); (a)-[]-&gt;(d); (a)-[]-&gt;(e); (b)-[]-&gt;(c); (b)-[]-&gt;(d); (b)-[]-&gt;(e); (c)-[]-&gt;(d); (c)-[]-&gt;(e); (d)-[]-&gt;(e)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).filter(&quot;a.id != d.id&quot;).filter(&quot;b.id != d.id&quot;).filter(&quot;c.id != d.id&quot;).filter(&quot;a.id != e.id&quot;).filter(&quot;b.id != e.id&quot;).filter(&quot;c.id != e.id&quot;).filter(&quot;d.id != e.id&quot;).count
}

def count_K6(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(b); (a)-[]-&gt;(c); (a)-[]-&gt;(d); (a)-[]-&gt;(e); (a)-[]-&gt;(f); (b)-[]-&gt;(c); (b)-[]-&gt;(d); (b)-[]-&gt;(e); (b)-[]-&gt;(f); (c)-[]-&gt;(d); (c)-[]-&gt;(e); (c)-[]-&gt;(f); (d)-[]-&gt;(e); (d)-[]-&gt;(f); (e)-[]-&gt;(f)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).filter(&quot;a.id != d.id&quot;).filter(&quot;b.id != d.id&quot;).filter(&quot;c.id != d.id&quot;).filter(&quot;a.id != e.id&quot;).filter(&quot;b.id != e.id&quot;).filter(&quot;c.id != e.id&quot;).filter(&quot;d.id != e.id&quot;).filter(&quot;a.id != f.id&quot;).filter(&quot;b.id != f.id&quot;).filter(&quot;c.id != f.id&quot;).filter(&quot;d.id != f.id&quot;).filter(&quot;e.id != f.id&quot;).count
}

def count_K7(input_graph: GraphFrame) = {
	val g_1 = &quot;(a)-[]-&gt;(b); (a)-[]-&gt;(c); (a)-[]-&gt;(d); (a)-[]-&gt;(e); (a)-[]-&gt;(f); (a)-[]-&gt;(g); (b)-[]-&gt;(c); (b)-[]-&gt;(d); (b)-[]-&gt;(e); (b)-[]-&gt;(f); (b)-[]-&gt;(g); (c)-[]-&gt;(d); (c)-[]-&gt;(e); (c)-[]-&gt;(f); (c)-[]-&gt;(g); (d)-[]-&gt;(e); (d)-[]-&gt;(f); (d)-[]-&gt;(g); (e)-[]-&gt;(f); (e)-[]-&gt;(g); (f)-[]-&gt;(g)&quot;
	input_graph.find(g_1).filter(&quot;a.id != b.id&quot;).filter(&quot;a.id != c.id&quot;).filter(&quot;b.id != c.id&quot;).filter(&quot;a.id != d.id&quot;).filter(&quot;b.id != d.id&quot;).filter(&quot;c.id != d.id&quot;).filter(&quot;a.id != e.id&quot;).filter(&quot;b.id != e.id&quot;).filter(&quot;c.id != e.id&quot;).filter(&quot;d.id != e.id&quot;).filter(&quot;a.id != f.id&quot;).filter(&quot;b.id != f.id&quot;).filter(&quot;c.id != f.id&quot;).filter(&quot;d.id != f.id&quot;).filter(&quot;e.id != f.id&quot;).filter(&quot;a.id != g.id&quot;).filter(&quot;b.id != g.id&quot;).filter(&quot;c.id != g.id&quot;).filter(&quot;d.id != g.id&quot;).filter(&quot;e.id != g.id&quot;).filter(&quot;f.id != g.id&quot;).count
}
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../contents/student-project-07_group-MathAtKTH/02_Data_Processing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../contents/student-project-07_group-MathAtKTH/02_Data_Processing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
